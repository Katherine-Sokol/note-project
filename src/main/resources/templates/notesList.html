<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>My Notes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000000;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2% 0;
        }

        .button {
            background-color: #ffffff;
            border-radius: 5px;
            color: black;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }


    </style>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous"
    />

</head>

<body>
<h1>My Notes</h1>

<div th:if="${#lists.isEmpty(notes)}">
    <p>Sorry, you have no notes</p>
</div>

<div th:unless="${#lists.isEmpty(notes)}">
    <ul>
        <li th:each="note : ${notes}">
<!--            //TODO change name on title-->
            <span th:text="${note.title}"></span>
            <span th:text="${note.content}"></span>
            <span th:text="${note.access}"></span>
            <span th:text="${note.user_id}"></span>
            <button class="button" th:onclick="'deleteNoteFunction('+${note.id}+');'">Delete</button>
            <button class="button" th:onclick="'editNoteFunction('+${note.id}+');'">Edit</button>
            <button class="button" th:onclick="'shareNoteFunction('+${note.id}+');'">Share</button>
        </li>
    </ul>
</div>


<!--TODO Changed on /note/create-->
<button class="button" onclick="window.location.href='/note/create'">Add note</button>

<div>
    <a type="button" class="btn btn-secondary" href="/users">
        Go to user interface
    </a>
    <a type="button" class="btn btn-primary" href="/logout"> Log out </a>
</div>

<script>
        function editNoteFunction(noteId) {
            // TODO //edit.html?noteId= changed on
            // window.location.href = '/edit.html?noteId=' + noteId;
            window.location.href = '/note/edit/' + noteId;
        }

        function shareNoteFunction(noteId) {
            alert('Note with ID: ' + noteId + ' shared!');
        }

        function deleteNoteFunction(noteId) {
            if (confirm('Are you sure you want to delete this note?')) {
                // TODO changed /note/ on /note/delete/
                fetch(`/note/delete/${noteId}`, {
                    // TODO changed DELETE on GET
                    method: 'GET'
                }).then(response => {
                    if (response.ok) {
                        alert('Note deleted successfully!');
                        location.reload(); // Щоб оновити список нотаток після видалення
                    } else {
                        alert('Error deleting the note.');
                    }
                });
            }
        }
</script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"
></script>
<script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"
></script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"
></script>
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Previous</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
            <a class="page-link" href="#">Next</a>
        </li>
    </ul>
</nav>

</body>
</html>
